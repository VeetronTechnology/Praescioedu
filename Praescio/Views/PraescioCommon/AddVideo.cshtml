
@{
    ViewBag.Title = "AddVideo";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var assignmentTitle = Praescio.Models.Common.ACCOUNT.AccountTypeId == (int)Praescio.BusinessEntities.Common.AccountType.SuperAdmin ? "Lesson" : "Assignment";
}

<div class="right_col" role="main" ng-controller="addVideoCtrl">
    <div class="cont">
        <ol class="breadcrumb breadcrumb-bg-teal align-right">
            <li><a href="index.html"><i class="material-icons">home</i> Home</a></li>
            <li><a href="add_question.html"> Add Questions</a></li>
            <li>Add Video</li>
        </ol>

        <div class="container-fluid">
            <!-- Vertical Layout -->
            <div class="row clearfix">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="card">
                        <div class="header">
                            <h2>
                                Add Video
                            </h2>
                        </div>
                        <div class="body">
                            
                                <label for="Title">Title:</label>
                                <div class="form-group">
                                    <div class="form-line">
                                        <input type="text" class="form-control" placeholder="Title">
                                    </div>
                                </div>


                                <!--Below New Add views-->

                                <form id="SchoolForm" name="SchoolForm" data-parsley-validate>

                                <div class="form-group">
                                    <label for="heard" class="required">Select Board</label>
                                    <select id="Board" name="Board" ng-change="ChangeBoard(Assignment.BoardId)" class="input-sm form-control" ng-model="Assignment.BoardId" ng-options="option.Id as option.BoardName for option in BoardList" ng-required="true">
                                        <option value="">-- Select Board --</option>
                                    </select>
                                    <p ng-show="AssignmentForm.Board.$invalid && (AssignmentForm.Board.$dirty || submitted ||AssignmentForm.Board.$touched )" class="text-danger">Board is required.</p>
                                </div>

                                <div class="form-group">
                                    <div>
                                        <label for="heard">Select Medium</label>
                                        <select id="Medium" name="Medium" class="input-sm form-control" ng-model="Assignment.MediumId" ng-disabled="Assignment.BoardId>1" ng-options="option.Id as option.Name for option in MediumList" ng-change="ChangeMedium(Assignment.MediumId)" ng-required="true">
                                            <option value="">-- Select Medium --</option>
                                        </select>
                                    </div>
                                    <p ng-show="AssignmentForm.Medium.$invalid && (AssignmentForm.Medium.$dirty || submitted ||AssignmentForm.Medium.$touched )" class="text-danger">Medium is required.</p>
                                </div>

                                <div class="form-group">
                                    <div>
                                        <label for="heard">Select Standard</label>
                                        <select id="Standard" name="Standard" class="input-sm form-control" ng-model="Assignment.StandardId" ng-options="option.Id as option.StandardName for option in StandardList" ng-change="ChangeStandard(Assignment.StandardId)" ng-required="true">
                                            <option value="">-- Select Standard --</option>
                                        </select>
                                    </div>
                                    <p ng-show="AssignmentForm.Standard.$invalid && (AssignmentForm.Standard.$dirty || submitted ||AssignmentForm.Standard.$touched )" class="text-danger">Standard is required.</p>
                                </div>

                                    <div class="form-group">
                                        <div>
                                            <label for="heard">Select Subject</label>
                                            <select id="Subject" name="Subject" class="input-sm form-control" ng-model="Assignment.SubjectId" ng-options="option.Id as option.SubjectName for option in SubjectList" ng-change="ChangeSubject(Assignment.SubjectId)" ng-required="true">
                                                <option value="">-- Select Subject --</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="form-group">

                                        <label for="Version">Select @assignmentTitle Type</label>
                                        <select id="Assignment" name="Assignment" class="input-sm form-control" ng-model="AssignmentTypeId" ng-options="option.AssignmentTypeId as option.AssignmentTypeName for option in AssignmentTypeList" ng-change="GetAssignmentByType(AssignmentTypeId)" ng-required="true">
                                            <option value="">-- Select @assignmentTitle Type--</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label for="Version">Select @assignmentTitle</label>
                                        <select id="Assignment" name="Assignment" class="input-sm form-control" ng-model="AssignmentId" ng-options="option.AssignmentId as option.Title for option in AssignmentList" ng-change="" ng-required="true">
                                            <option value="">-- Select @assignmentTitle --</option>
                                        </select>
                                    </div>

                                    <!--Above New Add views-->


                                <label for="Add Video">Add Video:</label>
                                <div class="form-group">
                                    <div class="form-line">
                                        <input type="file">
                                    </div>
                                </div>

                                <br>
                                <button type="button" class="btn btn-primary waves-effect">SUBMIT</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- #END# Vertical Layout -->

        </div>

    </div>
</div>





@section Scripts{

    <script type="text/javascript">
      
        myApp.controller('addVideoCtrl', function ($scope, $rootScope, $filter, NetworkService) {

            $scope.Assignment = {};
            $scope.AssignmentListAll = [];
            NetworkService.get('PraescioCommon/GetAssignmentListDropDown?AssignmentType=@ViewBag.AssignmentType').success(function (data) {
                $scope.AssignmentListAll = data.dataContent;
                console.log(data);
            });

            var formdata = new FormData();
            $scope.getTheFiles = function ($files) {
                $scope.isDisplay = true;
                if ($files.length != 0)
                    $scope.FileUpload = [];
                for (var i = 0; i < $files.length; i++) {
                    $scope.FileUpload.push({ FileName: $files[i].name, ContentType: $files[i].type, Size: $files[i].size });
                }
                $scope.isDisplay = true;
                angular.forEach($files, function (value, key) {
                    formdata.append(0, value);
                });

            };

            $scope.selectedFile = null;
            $scope.msg = "";
           


                $scope.MCQAnswerList = [{ "id": 'A', "text": 'A' }, { "id": 'B', "text": 'B' }, { "id": 'C', "text": 'C' }, { "id": 'D', "text": 'D' }];



                NetworkService.get('PraescioCommon/GetAssignmentTypeList').success(function (data) {
                    $scope.AssignmentTypeList = data;
                });

                $scope.GetAssignmentByType = function (AssignmentTypeId) {
                    NetworkService.get('PraescioCommon/GetAssignmentList?AssignmentType=' + AssignmentTypeId).success(function (data) {
                        $scope.AssignmentList = data.dataContent;
                        console.log(data);
                    });
                }

            $scope.selectedFile = null;
            $scope.msg = "";

              $scope.StandardList = [{ Id: 1, StandardName: '5th' }, { Id: 2, StandardName: '6th' }, { Id: 3, StandardName: '7th' },
                               { Id: 4, StandardName: '8th' }, { Id: 5, StandardName: '9th' }, { Id: 6, StandardName: '10th' }]

            NetworkService.get('PraescioAdmin/GetBoardList').success(function (data) {
                $scope.BoardList = data;
            });


            NetworkService.get('PraescioAdmin/GetMedium').success(function (data) {
                $scope.MediumList = data;

            });
            $scope.ChangeBoard = function (boardname) {
                if (boardname > 1) {
                    $scope.Assignment.MediumId = 1;
                }
            }

                $scope.ChangeStandard = function (id) {
                    NetworkService.get('PraescioCommon/GetSubject?standardid=' + id + '&mediumid=' + $scope.Assignment.MediumId).success(function (data) {
                        $scope.SubjectList = data;
                    });
                }
                NetworkService.get('PraescioCommon/GetAssignmentTypeList').success(function (data) {
                    $scope.AssignmentTypeList = data;
                });

                $scope.GetAssignmentByType = function (AssignmentTypeId) {
                    NetworkService.get('PraescioCommon/GetAssignmentList?AssignmentType=' + AssignmentTypeId).success(function (data) {
                        $scope.AssignmentListAll = data.dataContent;
                        console.log(data.dataContent);
                        $scope.ChangeAssignmentList();
                    });
                }

                $scope.ChangeSubject = function (id) {
                    $scope.ChangeAssignmentList();
                }

                $scope.ChangeAssignmentList = function () {
                    console.log('$scope.Assignment', $scope.Assignment, $scope.Assignment.SubjectId)
                    console.log('$scope.AssignmentList', $scope.AssignmentListAll)
                    $scope.AssignmentList = $scope.AssignmentListAll.filter(m => m.SubjectId == $scope.Assignment.SubjectId);
                    console.log('$scope.AssignmentList', $scope.AssignmentList)
                }

            $scope.ChangeAssignment = function (id) {
                NetworkService.get('PraescioCommon/GetAssignmentDetail?assignmentid=' + id).success(function (data) {
                    $scope.Assignment = data.Assignment;
                    $scope.ChangeStandard(data.Assignment.StandardId);

                });
            }
            

        });
    </script>
}
